(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(){const e=document.createElement("div");e.className="wrapper-game";const t=document.createElement("div");t.className="block-buttons",t.insertAdjacentHTML("afterbegin",'<button class="new-game">New game</button>\n    <button class="switch-sound">Sound Off</button>\n    <button class="save">Save</button>\n    <button class="load">Load</button>\n    <button class="records">Results</button>');const o=document.createElement("div");o.className="block-info",o.insertAdjacentHTML("afterbegin",'<div>Step:</div>\n    <div class="moves">0</div>\n    <div>Time:</div>\n    <div class="time"></div>');const n=document.createElement("div");n.className="block-gamefild";let l="";for(let e=0;e<f.length;e++)0!==f[e]?l+=`<div class="cell">${f[e]}</div>`:l+=`<div class="cell" style="display: none">${f[e]}</div>`;n.insertAdjacentHTML("afterbegin",`${l}`);const a=document.createElement("div");return a.className="block-changegame",a.insertAdjacentHTML("afterbegin",'<input type="radio" id="radio9" name="radio" class="radio" value="3">\n    <label for="radio9">3x3</label>    \n    <input type="radio" id="radio16" name="radio" class="radio" value="4">\n    <label for="radio16">4x4</label>\n    <input type="radio" id="radio25" name="radio" class="radio" value="5">\n    <label for="radio25">5x5</label>\n    <input type="radio" id="radio36" name="radio" class="radio" value="6">\n    <label for="radio36">6x6</label>\n    <input type="radio" id="radio49" name="radio" class="radio" value="7">\n    <label for="radio49">7x7</label>\n    <input type="radio" id="radio64" name="radio" class="radio" value="8">\n    <label for="radio64">8x8</label>'),e.append(t),e.append(o),e.append(n),e.append(a),document.body.append(e),e}function o(e){let t=document.createElement("div");t.className="overlay",t.innerHTML=`\n  <div class="win" onclick="event.stopPropagation()">\n    <div class="close">\n      <img class="modal-close" src="./src/assets/x_icon.png" alt="close">        \n    </div>\n    ${e}\n  </div>`,document.body.append(t);let o=document.querySelector(".close");t.addEventListener("click",l),o.addEventListener("click",l)}function n(){let e=JSON.parse(localStorage.getItem("records")),t="";if(e)for(let o=0;o<e.length;o++)t+=`<tr><td>${o+1}</td><td>${e[o].size}</td><td>${e[o].time}</td><td>${e[o].step}</td></tr>`;o(`\n    <table class="table">\n    <caption>Score table</caption>\n    <tr><th>â„–</th><th>Size</th><th>Time</th><th>Moves</th></tr>\n    ${t}\n    </table>`)}function l(){document.querySelector(".overlay").remove()}function a(e){let t=[],o=[];for(let n=1;n<=e**2-1;n++)t.push(n),o.push(n);!function(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}}(t);let n=0;for(let e=0;e<t.length;e++)for(let o=e;o<=t.length;o++)t[e]>t[o]&&n++;e%2!=0&&n%2!=0||e%2==0&&n%2!=0?a(e):(t.push(0),o.push(0),f=t,p=o)}function r(){localStorage.setItem("savedArr",f),localStorage.setItem("savedStep",v),localStorage.setItem("savedSec",y),localStorage.setItem("savedMin",g),localStorage.setItem("savedSize",m)}function s(){if(localStorage.getItem("savedArr")){let e=[];localStorage.getItem("savedArr").split(",").forEach((t=>e.push(+t))),f=e,y=+localStorage.getItem("savedSec"),g=+localStorage.getItem("savedMin"),v=+localStorage.getItem("savedStep"),m=+localStorage.getItem("savedSize"),document.querySelector(".moves").textContent=v,q()}else o("No saved game!")}function c(){v++,document.querySelector(".moves").textContent=v}function i(e){const t=new Audio(e.path);t.autoplay=h,t.loop=e.loop}function d(){h?(h=!1,this.textContent="Sound Off",this.style.borderColor="red",$.pause()):(h=!0,this.textContent="Sound Off",this.style.borderColor="#8ec030",$.play())}function u(){m=+this.value,E(),this.checked=!0}e.d({},{ED:()=>h,hH:()=>$,wu:()=>f,JL:()=>m,VV:()=>g,wo:()=>E,lG:()=>q,BE:()=>y,I3:()=>p,Nb:()=>v});let m=3,p=[],f=[],v=0,g=0,y=0,h=!0,S={path:"./src/assets/step.mp3",loop:!1},b={path:"./src/assets/win.mp3",loop:!1};const $=new Audio("./src/assets/fon.mp3");function E(){document.body.innerHTML="",a(m),t(),k(m),g=0,y=0,v=0,L()}function L(){document.querySelector(".new-game").addEventListener("click",E),document.querySelector(".switch-sound").addEventListener("click",d),document.querySelector(".save").addEventListener("click",r),document.querySelector(".load").addEventListener("click",s),document.querySelector(".records").addEventListener("click",n),document.querySelectorAll(".cell").forEach((e=>e.addEventListener("click",(e=>function(e){const t=document.querySelectorAll(".cell");let n,l=+e.target.innerHTML;for(let e=0;e<f.length;e++)f[e]===l&&(n=e);let a=function(e){let t=e.style.transform,o=[];return t.slice(10,t.length-1).split(", ").forEach((e=>o.push(e.slice(0,e.length-1)))),o}(t[n]),r=+a[0],s=+a[1];0===f[n+m]?(t[n].style.transform=`translate(${r}%, ${s+100}%)`,f[n+m]=f[n],f[n]=0,c(),i(S)):0===f[n-m]?(t[n].style.transform=`translate(${r}%, ${s-100}%)`,f[n-m]=f[n],f[n]=0,c(),i(S)):0===f[n+1]&&(n+1)%m!=0?(t[n].style.transform=`translate(${r+100}%, ${s}%)`,f[n+1]=f[n],f[n]=0,c(),i(S)):0===f[n-1]&&n%m!=0&&(t[n].style.transform=`translate(${r-100}%, ${s}%)`,f[n-1]=f[n],f[n]=0,c(),i(S)),setTimeout(q,100),function(){if(JSON.stringify(f)===JSON.stringify(p)){let e=g<10?"0"+g:g,t=y<10?"0"+y:y,n=JSON.parse(localStorage.getItem("records"))||[],l={size:`${m} x ${m}`,time:`${e} : ${t}`,step:`${v}`};n.push(l),localStorage.setItem("records",JSON.stringify(n)),o(`Hooray! You solved the puzzle in ${g<10?"0"+g:g} : ${y<10?"0"+y:y} and ${v} moves!`),i(b)}}()}(e))))),document.querySelectorAll(".radio").forEach((e=>e.addEventListener("click",u)))}function k(e){const t=document.querySelectorAll(".cell");let o=0,n=0;for(let l=0;l<t.length;l+=e){for(let l=0;l<e;l++)o<=e**2-1&&(t[o].style.transform=`translate(${0+100*l}%, ${0+100*n}%)`,t[o].style.width=100/e+"%",t[o].style.height=100/e+"%",o++);n++}}function q(){const e=document.querySelector(".block-gamefild");let t="";for(let e=0;e<f.length;e++)0!==f[e]?t+=`<div class="cell" draggable="true">${f[e]}</div>`:t+=`<div class="cell empty" style="display: none">${f[e]}</div>`;e.innerHTML=t,k(m),L()}$.autoplay=h,$.loop=!0,a(m),t(),k(m),function e(){document.querySelector(".time").textContent=`${g<10?"0"+g:g} : ${y<10?"0"+y:y}`,y++,y>=60&&(g++,y=0),setTimeout(e,1e3)}(),L()})();